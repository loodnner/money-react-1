(this["webpackJsonpreact-accountting-tsversion"]=this["webpackJsonpreact-accountting-tsversion"]||[]).push([[0],{34:function(n,e,t){},42:function(n,e,t){},43:function(n,e,t){"use strict";t.r(e);var c,i,a,r,o,s,l,d,j,b,u=t(1),x=t(24),h=t.n(x),O=t(11),f=t(4),p=t(10),g=t(6),m=t(2),v=t(3),w=t(19),k=(t(34),t(0)),y=["iconName","children","className"],N=function(n){n.iconName,n.children,n.className;var e=Object(w.a)(n,y);return Object(k.jsx)("div",{className:"icon",children:Object(k.jsx)("span",Object(p.a)({className:n.iconName},e))})},C=v.a.div(c||(c=Object(m.a)(["\n  /* background: white; */\n  line-height: 24px;\n  box-shadow: 0 0 3px rgba(0,0,0,0.25);\n>ul {\n  display: flex;\n  >li{\n    width:33.3333%;\n    text-align:center;\n    a{\n      display: flex;\n      flex-direction: column-reverse;\n      padding: 4px 0;\n      justify-content: center;\n      align-items: center;\n    .icon {\n        width: 20px;      \n        height: 20px;\n      }\n    &.selected{\n      font-weight:bold;\n    }\n    }   \n  }\n}\n"]))),S=function(){return Object(k.jsx)(C,{children:Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:Object(k.jsxs)(O.c,{to:"/money",activeClassName:"selected",children:["\u8bb0\u4e00\u7b14",Object(k.jsx)(N,{iconName:"iconfont icon-money"})]})}),Object(k.jsx)("li",{children:Object(k.jsxs)(O.c,{to:"/tags",activeClassName:"selected",children:["\u6807\u7b7e",Object(k.jsx)(N,{iconName:"iconfont icon-label"})]})}),Object(k.jsx)("li",{children:Object(k.jsxs)(O.c,{to:"/statistics",activeClassName:"selected",children:["\u7edf\u8ba1",Object(k.jsx)(N,{iconName:"iconfont icon-statistics"})]})})]})})},F=v.a.div(i||(i=Object(m.a)(["\nheight:100vh;\ndisplay: flex;\nflex-direction: column;\n"]))),T=v.a.div(a||(a=Object(m.a)(["\nflex-grow:1;\noverflow:auto;\n"]))),I=function(n){var e=Object(u.useRef)(null);return Object(u.useEffect)((function(){setTimeout((function(){e.current&&(e.current.scrollTop=n.scrollTop)}),0)}),[n.scrollTop]),Object(k.jsxs)(F,{children:[Object(k.jsx)(T,{ref:e,className:n.className,children:n.children}),Object(k.jsx)(S,{})]})},D=t(13),z=function(n,e){var t=Object(u.useRef)(0);Object(u.useEffect)((function(){t.current+=1})),Object(u.useEffect)((function(){t.current>1&&n()}),[n,e])},E=parseInt(window.localStorage.getItem("idMax")||"0"),A=function(){return E+=1,window.localStorage.setItem("idMax",E.toString()),E},B=function(){var n=Object(u.useState)([]),e=Object(g.a)(n,2),t=e[0],c=e[1];Object(u.useEffect)((function(){var n=JSON.parse(window.localStorage.getItem("tags")||"[]");0===n.length&&(n=[{id:A(),name:"\u8863\u670d"},{id:A(),name:"\u98df\u7269"},{id:A(),name:"\u4f4f\u5bbf"},{id:A(),name:"\u4ea4\u901a"}]),c(n)}),[]),z((function(){window.localStorage.setItem("tags",JSON.stringify(t))}),t);return{tags:t,addTag:function(){var n=window.prompt("\u65b0\u6807\u7b7e\u7684\u540d\u79f0\u4e3a");""!==n&&null!==n&&(t.filter((function(e){return e.name===n})).length>0?window.alert("\u6807\u7b7e\u540d\u4e0d\u80fd\u91cd\u590d"):c([].concat(Object(D.a)(t),[{id:A(),name:n}])))},findTag:function(n){return t.filter((function(e){return e.id===n}))[0]},updateTag:function(n,e){c(t.map((function(t){return t.id===n.id?{id:n.id,name:e}:t})))},deleteTag:function(n){c(t.filter((function(e){return e.id!==n.id})))},getTagName:function(n){return t.filter((function(e){return e.id===n}))[0].name}}},J=v.a.div(r||(r=Object(m.a)(["\n  background: #FFFFFF; \n  padding: 10px 12px;\n  flex-grow: 1;\n  display:flex;\n  flex-direction: column;\n  justify-content: flex-end; \n  align-items: flex-start;\n  >ol{\n      margin:0 -12px;\n      >li{\n       background: #D9D9D9; \n       border-radius: 18px;\n       display:inline-block; \n       padding: 3px 18px; \n       font-size: 14px; \n       margin: 6px 10px;\n\n       &.selected {\n         color: #FFFFFF;\n      }\n      }\n     \n  }\n  >button{\n    background:none; \n    border: none; \n    padding: 2px 4px;\n    border-bottom: 1px solid #333; \n    color: #666;\n    margin-top: 8px;\n  }\n"]))),M=function(n){var e=B(),t=e.tags,c=e.addTag,i=n.selectedTagsId;return Object(k.jsxs)(J,{children:[Object(k.jsx)("ol",{children:t.map((function(e){return Object(k.jsx)("li",{onClick:function(){var t;t=e.id,i.indexOf(t)>=0?n.onChange(i.filter((function(n){return n!==t}))):n.onChange([].concat(Object(D.a)(i),[t]))},className:i.indexOf(e.id)>=0?"selected":"",children:e.name},e.id)}))}),Object(k.jsx)("button",{onClick:c,children:"\u65b0\u589e\u6807\u7b7e"})]})},R=v.a.div(o||(o=Object(m.a)(["\n  font-size: 24px;\n  > ul{\n    display:flex;\n    > li {\n      width: 50%; \n      text-align:center;\n      padding: 16px 0;\n      position:relative;\n      &.selected::after{\n        content: '';\n        display:block; \n        height: 3px;\n        background:#333;\n        position:absolute;\n        bottom:0;\n        width: 100%;\n        left: 0;\n      }\n    }\n  }\n"]))),Y=function(n){var e={consume:"\u652f\u51fa",earn:"\u6536\u5165"},t=Object(u.useState)(["consume","earn"]),c=Object(g.a)(t,1)[0],i=n.type;return Object(k.jsx)(R,{children:Object(k.jsx)("ul",{children:c.map((function(t){return Object(k.jsx)("li",{className:i===t?"selected":"",onClick:function(){n.onChange(t)},children:e[t]},t)}))})})},L=["label","children"],K=v.a.div(s||(s=Object(m.a)(["\n    display:flex;\n    align-items: center;\n    > span { \n        margin-right: 16px; \n        white-space: nowrap; }\n    > input {\n      display:block;\n      width: 100%;\n      height: 44px;\n      background: none;\n      border: none;\n    }\n  "]))),P=function(n){n.label,n.children;var e=Object(w.a)(n,L);return Object(k.jsxs)(K,{children:[Object(k.jsx)("span",{children:n.label}),Object(k.jsx)("input",Object(p.a)({},e))]})},q=v.a.div(l||(l=Object(m.a)(["\n  background: #f5f5f5;\n  padding: 14px 16px;\n  font-size: 14px;\n  \n"]))),G=function(n){var e=n.notes;return Object(k.jsx)(q,{children:Object(k.jsx)(P,{label:"\u5907\u6ce8",type:"text",placeholder:"\u8bf7\u8f93\u5165",value:e,onChange:function(e){n.onChange(e.target.value)}})})},H=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";switch(n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return"0"===e?n:e+n;case".":return e.indexOf(".")>=0?e:e+".";case"\u5220\u9664":return 1===e.length?"0":e.slice(0,-1)||"";case"\u6e05\u7a7a":default:return"0"}},Q=v.a.section(d||(d=Object(m.a)(["\n  display:flex;\n  flex-direction: column;\n  > .output{\n    background:white;\n    font-size: 36px;\n    line-height: 72px;\n    text-align:right;\n    padding: 0 16px;\n    box-shadow: inset 0 -5px 5px -5px rgba(0,0,0,0.25),\n                inset 0 5px 5px -5px rgba(0,0,0,0.25);\n  }\n  > .pad{ \n    > button{\n      font-size: 18px; \n      float: left; \n      width: 25%; \n      height: 64px; \n      border: none;\n      &.ok{ \n          height: 128px; \n          float: right; }\n      &.zero{ \n          width: 50%;\n         }\n      &:nth-child(1){\n        background:#f2f2f2;\n      }\n      &:nth-child(2),\n      &:nth-child(5) {\n        background:#E0E0E0;\n      }\n      &:nth-child(3),\n      &:nth-child(6),\n      &:nth-child(9) {\n        background:#D3D3D3;\n      }\n      &:nth-child(4),\n      &:nth-child(7),\n      &:nth-child(10) {\n        background:#C1C1C1;\n      }\n      &:nth-child(8),\n      &:nth-child(11),\n      &:nth-child(13) {\n        background:#B8B8B8;\n      }\n      &:nth-child(12) {\n        background:#9A9A9A;\n      }\n      &:nth-child(14) {\n        background:#A9A9A9;\n      }\n    }\n  }\n"]))),U=function(n){var e=Object(u.useState)(n.amount.toString()),t=Object(g.a)(e,2),c=t[0],i=t[1];return Object(k.jsxs)(Q,{children:[Object(k.jsx)("div",{className:"output",children:c}),Object(k.jsxs)("div",{className:"pad clearfix",onClick:function(e){var t=e.target.textContent;null!==t&&("OK"!==t?"0123456789.".split("").concat(["\u5220\u9664","\u6e05\u7a7a"]).indexOf(t)>=0&&function(e){var t;t=e.length>=16?e.slice(0,16):0===e.length?"0":e,i(t),n.onChange(parseFloat(t))}(H(t,c)):n.onOk&&n.onOk())},children:[Object(k.jsx)("button",{children:"1"}),Object(k.jsx)("button",{children:"2"}),Object(k.jsx)("button",{children:"3"}),Object(k.jsx)("button",{children:"\u5220\u9664"}),Object(k.jsx)("button",{children:"4"}),Object(k.jsx)("button",{children:"5"}),Object(k.jsx)("button",{children:"6"}),Object(k.jsx)("button",{children:"\u6e05\u7a7a"}),Object(k.jsx)("button",{children:"7"}),Object(k.jsx)("button",{children:"8"}),Object(k.jsx)("button",{children:"9"}),Object(k.jsx)("button",{className:"ok",children:"OK"}),Object(k.jsx)("button",{className:"zero",children:"0"}),Object(k.jsx)("button",{className:"dot",children:"."})]})]})},V=function(){var n=Object(u.useState)([]),e=Object(g.a)(n,2),t=e[0],c=e[1];Object(u.useEffect)((function(){c(JSON.parse(window.localStorage.getItem("records")||"[]"))}),[]),z((function(){window.localStorage.setItem("records",JSON.stringify(t))}),t);return{records:t,addRecord:function(n){if(0===n.amount)return!1;if(0===n.tagsId.length)return alert("\u9009\u62e9\u4e00\u4e2a\u6807\u7b7e\u53ef\u4ee5\u5e2e\u52a9\u66f4\u597d\u7684\u5206\u7c7b\u54e6"),!1;var e=Object(p.a)(Object(p.a)({},n),{},{createDate:(new Date).toISOString()});return c([].concat(Object(D.a)(t),[e])),!0}}},W=Object(v.a)(I)(j||(j=Object(m.a)(["\n  display:flex;\n  flex-direction: column;\n"]))),X=v.a.div(b||(b=Object(m.a)(["\n  background-color: #c4c4c4;\n"]))),Z={tagsId:[],notes:"",type:"consume",amount:0};var $,_,nn,en=function(){var n=Object(u.useState)(Z),e=Object(g.a)(n,2),t=e[0],c=e[1],i=V().addRecord,a=function(n){c(Object(p.a)(Object(p.a)({},t),n))};return Object(k.jsxs)(W,{scrollTop:9999,children:[Object(k.jsx)(M,{selectedTagsId:t.tagsId,onChange:function(n){return a({tagsId:n})}}),Object(k.jsx)(G,{notes:t.notes,onChange:function(n){return a({notes:n})}}),Object(k.jsx)(X,{children:Object(k.jsx)(Y,{type:t.type,onChange:function(n){return a({type:n})}})}),Object(k.jsx)(U,{amount:t.amount,onChange:function(n){return a({amount:n})},onOk:function(){i(t)&&c(Z)}})]})},tn=t(28),cn=t.n(tn),an=v.a.div($||($=Object(m.a)(["\nbackground:#FFF;\n"]))),rn=v.a.div(_||(_=Object(m.a)(["\ndisplay: flex;\njustify-content: space-between;\nfont-size: 18px;\nbackground-color: white;\nline-height:20px;\npadding:10px 16px;\n> .notes{\nmargin-right:auto;\nmargin-left:16px;\nfont-size: 14px;\ncolor:#999;\n}\n"]))),on=v.a.h3(nn||(nn=Object(m.a)(["\n  font-weight:normal;\n  font-size: 18px;\n  line-height: 20px;\n  padding:10px 16px;\n"])));var sn,ln,dn,jn,bn=function(){var n=Object(u.useState)("consume"),e=Object(g.a)(n,2),t=e[0],c=e[1],i=V().records,a=B().getTagName,r={};i.filter((function(n){return n.type===t})).forEach((function(n){var e=cn()(n.createDate).format("YYYY\u5e74MM\u6708DD\u65e5");e in r||(r[e]=[]),r[e].push(n)}));var o=Object.entries(r).sort((function(n,e){return n[0]===e[0]?0:n[0]>e[0]?-1:n[0]<e[0]?1:0}));return Object(k.jsxs)(I,{children:[Object(k.jsx)(an,{children:Object(k.jsx)(Y,{type:t,onChange:function(n){return c(n)}})}),o.map((function(n){var e=Object(g.a)(n,2),t=e[0],c=e[1];return Object(k.jsxs)("div",{children:[Object(k.jsx)(on,{children:t}),Object(k.jsx)("div",{children:c.map((function(n){return Object(k.jsxs)(rn,{children:[Object(k.jsx)("div",{className:"tags",children:n.tagsId.map((function(n){return Object(k.jsx)("span",{children:a(n)},n)})).reduce((function(n,e,t,c){return n.concat(t<c.length-1?[e,"/"]:[e])}),[])}),n.notes&&Object(k.jsx)("div",{className:"notes",children:n.notes}),Object(k.jsxs)("div",{className:"amount",children:["\uffe5",n.amount]})]},n.createDate)}))})]})}))]})},un=v.a.button(sn||(sn=Object(m.a)(["\nfont-size: 18px; border: none; padding: 8px 12px;\nbackground-color:#666;\nborder-radius: 4px;\ncolor: white;\n"]))),xn=v.a.div(ln||(ln=Object(m.a)(["\ndisplay:flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\n"]))),hn=v.a.div(dn||(dn=Object(m.a)(["\n  height: 16px;"]))),On=v.a.ol(jn||(jn=Object(m.a)(["\n  font-size: 16px; \n  background:white;\n  > li{\n    a{\n      display:flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 16px 12px 0;\n    }\n      border-bottom: 1px solid #d5d5d9;\n      line-height: 20px;\n      margin: 0px 14px 0px 16px ; \n  }\n"])));var fn=function(){var n=B(),e=n.tags,t=n.addTag;return Object(k.jsxs)(I,{children:[Object(k.jsx)(On,{children:e.map((function(n){return Object(k.jsx)("li",{children:Object(k.jsxs)(O.b,{to:"/tags/"+n.id,children:[Object(k.jsx)("span",{className:"oneLine",children:n.name}),Object(k.jsx)(N,{iconName:"iconfont icon-right"})]})},n.id)}))}),Object(k.jsxs)(xn,{children:[Object(k.jsx)(hn,{}),Object(k.jsx)(hn,{}),Object(k.jsx)(hn,{}),Object(k.jsx)(un,{onClick:t,children:"\u65b0\u589e\u6807\u7b7e"})]})]})};var pn,gn,mn=function(){return Object(k.jsx)("div",{children:"\u9875\u9762\u4e0d\u5b58\u5728"})},vn=v.a.header(pn||(pn=Object(m.a)(["\n  display:flex;\n  justify-content: space-between;\n  align-items: center;\n  line-height: 20px;\n  padding: 14px;\n  background:white;\n"]))),wn=v.a.div(gn||(gn=Object(m.a)(["\n  background:white;\n  padding: 0 16px;\n  margin-top: 8px;\n"]))),kn=function(){var n=Object(f.h)().id,e=B(),t=e.findTag,c=e.updateTag,i=e.deleteTag,a=t(parseInt(n)),r=Object(f.g)();return Object(k.jsxs)(I,{children:[Object(k.jsxs)(vn,{children:[Object(k.jsx)(N,{iconName:"iconfont icon-left",onClick:function(){r.goBack()}}),Object(k.jsx)("span",{children:"\u7f16\u8f91\u6807\u7b7e"}),Object(k.jsx)(N,{iconName:""})]}),a?function(n){return Object(k.jsxs)("div",{children:[Object(k.jsx)(wn,{children:Object(k.jsx)(P,{label:"\u6807\u7b7e\u540d",type:"text",placeholder:"\u6807\u7b7e\u540d",value:n.name,onChange:function(e){c(n,e.target.value)}})}),Object(k.jsxs)(xn,{children:[Object(k.jsx)(hn,{}),Object(k.jsx)(hn,{}),Object(k.jsx)(hn,{}),Object(k.jsx)(un,{onClick:function(){i(n)},children:"\u5220\u9664\u6807\u7b7e"})]})]})}(a):Object(k.jsxs)(xn,{children:[Object(k.jsx)(hn,{}),Object(k.jsx)(hn,{}),"\u6807\u7b7e\u4e0d\u5b58\u5728"]})]})};var yn=function(){return Object(k.jsx)(O.a,{children:Object(k.jsxs)(f.d,{children:[Object(k.jsx)(f.b,{exact:!0,path:"/tags",children:Object(k.jsx)(fn,{})}),Object(k.jsx)(f.b,{exact:!0,path:"/tags/:id",children:Object(k.jsx)(kn,{})}),Object(k.jsx)(f.b,{exact:!0,path:"/statistics",children:Object(k.jsx)(bn,{})}),Object(k.jsx)(f.b,{exact:!0,path:"/money",children:Object(k.jsx)(en,{})}),Object(k.jsx)(f.b,{exact:!0,path:"/",children:Object(k.jsx)(f.a,{to:"/money"})}),Object(k.jsx)(f.b,{path:"*",children:Object(k.jsx)(mn,{})})]})})},Nn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,44)).then((function(e){var t=e.getCLS,c=e.getFID,i=e.getFCP,a=e.getLCP,r=e.getTTFB;t(n),c(n),i(n),a(n),r(n)}))};t(42);h.a.render(Object(k.jsx)(yn,{}),document.getElementById("root")),Nn()}},[[43,1,2]]]);
//# sourceMappingURL=main.ee645bfb.chunk.js.map