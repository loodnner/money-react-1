{"version":3,"sources":["components/Icon.tsx","components/Nav.tsx","components/Layout.tsx","hooks/useUpdate.tsx","lib/createId.tsx","hooks/useTag.tsx","views/Money/TagsSection.tsx","views/Money/TypeSection.tsx","components/Input.tsx","views/Money/NoteSection.tsx","views/Money/NumberPadSection/generateOutput.tsx","views/Money/NumberPadSection/Wrapper.tsx","views/Money/NumberPadSection.tsx","hooks/useRecord.tsx","views/Money.tsx","views/Statistics.tsx","components/Button.tsx","components/Center.tsx","components/Space.tsx","views/Tags.tsx","views/NoMatch.tsx","views/EditTag.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Icon","props","iconName","children","className","rest","NavWrapper","styled","div","Nav","to","activeClassName","Wrapper","Main","Layout","mainRef","useRef","useEffect","setTimeout","current","scrollTop","ref","useUpdate","fn","dependency","count","id","parseInt","window","localStorage","getItem","createId","setItem","toString","useTags","useState","tags","setTags","localTags","JSON","parse","length","name","stringify","addTag","tagName","prompt","filter","t","alert","findTag","updateTag","tag","map","deleteTag","getTagName","tagId","TagsSection","selectedTagsId","onClick","tagsId","indexOf","onChange","TypeSection","typeMap","typeList","type","Label","Input","label","NoteSection","note","notes","placeholder","value","e","target","generateOutput","buttonText","output","slice","section","NumberPadSection","amount","_setOutput","text","textContent","split","concat","newOutput","parseFloat","setOutput","onOk","useRecord","records","setRecords","addRecord","newRecord","record","createDate","Date","toISOString","MyLayout","TypeWrapper","defaultRecordValue","Money","selectedRecord","setRecord","obj","Item","Header","h3","Statistics","setType","hash","r","forEach","key","day","format","push","array","Object","entries","sort","a","b","date","reduce","result","span","index","Button","button","Center","Space","TagList","ol","Tags","NoMatch","Topbar","header","InputWrapper","EditTag","idString","useParams","history","useHistory","goBack","tagContent","App","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.14513cc0.chunk.js","sourcesContent":["import React from \"react\"\nimport \"../styles/icon.scss\"\n\ntype Props={\n    iconName:string;\n}& React.BaseHTMLAttributes<HTMLBaseElement>\n// drts 解决封装后的组件没有普通属性的问题\n\nconst Icon = (props:Props)=>{\n    const {iconName,children,className,...rest} = props\n    return(\n        <div className=\"icon\">\n        <span className={props.iconName} {...rest}></span>\n        </div>\n    )\n}\n\nexport default Icon;\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Icon from \"./Icon\"\n\nconst NavWrapper = styled.div`\n  /* background: white; */\n  line-height: 24px;\n  box-shadow: 0 0 3px rgba(0,0,0,0.25);\n>ul {\n  display: flex;\n  >li{\n    width:33.3333%;\n    text-align:center;\n    a{\n      display: flex;\n      flex-direction: column-reverse;\n      padding: 4px 0;\n      justify-content: center;\n      align-items: center;\n    .icon {\n        width: 20px;      \n        height: 20px;\n      }\n    &.selected{\n      font-weight:bold;\n    }\n    }   \n  }\n}\n`\n\nconst Nav = ()=>{\n    return (\n        <NavWrapper>\n             <ul>\n            <li>\n              <NavLink to=\"/money\" activeClassName=\"selected\">记一笔\n              <Icon iconName = \"iconfont icon-money\"/>\n              </NavLink>\n            </li>\n            <li>\n              <NavLink to=\"/tags\" activeClassName=\"selected\">标签\n              <Icon iconName = \"iconfont icon-label\"/>\n              </NavLink>\n            </li>\n            <li>\n              <NavLink to=\"/statistics\" activeClassName=\"selected\">统计\n              <Icon iconName = \"iconfont icon-statistics\"/>\n              </NavLink>\n            </li>\n          </ul>\n        </NavWrapper>\n    )\n}\n\n\nexport default Nav;","import Nav from './Nav';\nimport React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\nheight:100vh;\ndisplay: flex;\nflex-direction: column;\n`\n\nconst Main = styled.div`\nflex-grow:1;\noverflow:auto;\n`\ntype Props = {\n  className?:string;\n  scrollTop?:number;\n}\n\n// drts children用法\nconst Layout:React.FC<Props> = (props)=>{\n  const mainRef = useRef<HTMLDivElement>(null)\n  useEffect(()=>{\n    setTimeout(() => {\n      if(!mainRef.current){return }\n        mainRef.current.scrollTop = props.scrollTop!}    \n    , 0);  \n  },[props.scrollTop])\n    return (\n    <Wrapper>\n      <Main ref={mainRef} className = {props.className}>\n          {props.children} \n      </Main>\n      <Nav />\n    </Wrapper>\n\n    )\n}\n\nexport default Layout;","import { useRef, useEffect } from \"react\"\n\nconst useUpdate = (fn:()=>void,dependency:any[])=>{\nconst count = useRef(0);\nuseEffect(()=>{\n    count.current+=1\n  });\nuseEffect(()=>{\n    if(count.current>1){\n        fn()  \n    }},[fn,dependency]) //不可变数据\n}\nexport default useUpdate","// 持久化id\nlet id:number = parseInt(window.localStorage.getItem('idMax')||'0')\nconst createId = ()=>{\n    id+=1\n    window.localStorage.setItem('idMax',id.toString())\n    return id\n}\n\nexport default createId","import useUpdate from 'hooks/useUpdate';\nimport createId from 'lib/createId';\nimport {useEffect, useState} from 'react';\n\n\ntype TagItem = {\n  id:number,\n  name:string\n}\n// 这几个读写数据的时机我分不清楚drts\nconst useTags = () => { \n  // 封装一个自定义hooks\n  const [tags, setTags] = useState<TagItem[]>([]);\n  \n  useEffect(()=>{\n   let localTags = JSON.parse(window.localStorage.getItem('tags')||'[]')\n   if(localTags.length===0){\n      localTags = [\n        {id:createId(),name:'衣服'},\n        {id:createId(),name:'食物'},\n        {id:createId(),name:'住宿'},\n        {id:createId(),name:'交通'}\n      ]}\n  setTags(localTags)\n   },[]);//组件挂载时执行\n\n  useUpdate(()=>{\n    window.localStorage.setItem('tags',JSON.stringify(tags))\n  },tags);\n  \n\n\n  const findTag = (id:number)=>{\n    return tags.filter(t=>t.id===id)[0]\n  } \n  const updateTag = (tag:TagItem,name:string)=>{\n    setTags(tags.map(t=>t.id===tag.id ? {id:tag.id,name:name } : t))\n    // drts修改成重复值应该避免\n  }\n  const deleteTag = (tag:TagItem)=>{\n    setTags(tags.filter(t=>t.id!==tag.id))\n  }\n  const addTag = ()=>{\n    const tagName = window.prompt('新标签的名称为')\n    //不能重复新增标签\n    if(tagName!==''&& tagName!==null){\n      if(tags.filter(t=>t.name===tagName).length>0){\n        window.alert('标签名不能重复')\n      }else{\n      setTags([...tags,{id:createId(),name:tagName}])\n    }\n    }\n  }\n\n  const getTagName = (tagId:number)=>{\n    const tag = tags.filter(t=>t.id===tagId)[0]\n    return tag.name\n  }\n\n\n  return {tags,addTag,findTag,updateTag,deleteTag,getTagName};\n};\n\nexport {useTags};","import styled from \"styled-components\";\nimport {useTags} from 'hooks/useTag';\n\n\nconst Wrapper = styled.div`\n  background: #FFFFFF; \n  padding: 10px 12px;\n  flex-grow: 1;\n  display:flex;\n  flex-direction: column;\n  justify-content: flex-end; \n  align-items: flex-start;\n  >ol{\n      margin:0 -12px;\n      >li{\n       background: #D9D9D9; \n       border-radius: 18px;\n       display:inline-block; \n       padding: 3px 18px; \n       font-size: 14px; \n       margin: 6px 10px;\n\n       &.selected {\n         color: #FFFFFF;\n      }\n      }\n     \n  }\n  >button{\n    background:none; \n    border: none; \n    padding: 2px 4px;\n    border-bottom: 1px solid #333; \n    color: #666;\n    margin-top: 8px;\n  }\n`\n\n// drts 正常的函数组件+CSS咋安排。。\n\ntype Props = {\n  selectedTagsId:number[],\n  onChange:(selectedTagsId:number[])=>void\n}\n\nconst TagsSection:React.FunctionComponent<Props> = (props)=>{\n  const {tags,addTag} = useTags()\n  const selectedTagsId = props.selectedTagsId\n  const onToggleTag = (tagsId:number)=>{\n    if(selectedTagsId.indexOf(tagsId)>=0){\n      props.onChange((selectedTagsId.filter(t=>t!==tagsId)))\n    }else{\n      props.onChange([...selectedTagsId,tagsId])\n    }\n  }\n  return(\n    <Wrapper>\n      <ol>\n          {tags.map(tag=>(\n          <li key={tag.id} onClick= {()=>{onToggleTag(tag.id)}} className={selectedTagsId.indexOf(tag.id)>=0 ? 'selected':''}>\n            {tag.name}\n          </li>\n          ))}\n      </ol>\n      <button onClick={addTag}>新增标签</button>\n    </Wrapper>\n  )\n}\n\nexport  {TagsSection};","import { useState } from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  font-size: 24px;\n  > ul{\n    display:flex;\n    > li {\n      width: 50%; \n      text-align:center;\n      padding: 16px 0;\n      position:relative;\n      &.selected::after{\n        content: '';\n        display:block; \n        height: 3px;\n        background:#333;\n        position:absolute;\n        bottom:0;\n        width: 100%;\n        left: 0;\n      }\n    }\n  }\n`;\ntype MoneyType = 'consume'|'earn'\n\ntype Props = {\n  type: MoneyType,\n  onChange:(type: MoneyType)=>void\n}\n\nconst TypeSection:React.FunctionComponent<Props> = (props)=>{\n  const typeMap = {\n    'consume':'支出',\n    'earn':'收入'\n  }\n  type Keys = keyof typeof typeMap\n  const [typeList] = useState<Keys[]>(['consume','earn'])\n  // 将typeList的类型收缩\n  const type = props.type\n  return(\n    <Wrapper>\n      <ul>\n          {typeList.map(t=>\n           <li key={t} className={type===t?'selected':''}\n           onClick={()=>{props.onChange(t)}}>\n             {typeMap[t]}\n           </li>\n            )} \n      </ul>   \n    </Wrapper>\n  )\n}\n\nexport {TypeSection}","import styled from \"styled-components\";\n\nconst  Label = styled.div`\n    display:flex;\n    align-items: center;\n    > span { \n        margin-right: 16px; \n        white-space: nowrap; }\n    > input {\n      display:block;\n      width: 100%;\n      height: 44px;\n      background: none;\n      border: none;\n    }\n  `\n\n\ntype Props = {\n    label:string\n} & React.InputHTMLAttributes<HTMLInputElement>\n\nconst Input:React.FunctionComponent<Props> = (props)=>{\n    const {label,children,...rest} = props\n    return(\n    <Label>\n        <span>{props.label}</span>\n    <input {...rest}/>\n    </Label>)\n    }\n\nexport default Input;","import Input from \"components/Input\";\nimport React, { ChangeEventHandler } from \"react\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  background: #f5f5f5;\n  padding: 14px 16px;\n  font-size: 14px;\n  \n`;\n\ntype Props = {\n  notes:string,\n  onChange:(notes:string)=>void\n}\n\nconst NoteSection:React.FC<Props> = (props)=>{\n  const note = props.notes\n  const onChange:ChangeEventHandler<HTMLInputElement> = (e)=>{\n    props.onChange(e.target.value)\n  }\n  // drts上面这个onChange不是很清晰\n\n  return(\n    <Wrapper>\n       <Input label = \"备注\" type=\"text\" placeholder=\"请输入\" value={note} onChange={onChange}/>\n    </Wrapper>\n  )\n}\n\n\nexport {NoteSection}\n","\nconst generateOutput = (buttonText:string,output='0')=>{\n    switch(buttonText){\n      case  '0':\n      case  '1':\n      case  '2':\n      case  '3':\n      case  '4':\n      case  '5':\n      case  '6':\n      case  '7':\n      case  '8':\n      case  '9':\n          if(output==='0'){\n            return (buttonText)\n          }else{\n              return output+buttonText\n          }\n      case  '.':\n          if(output.indexOf('.')>=0)\n          {return output}\n            else{\n            return  output+'.'\n          }\n      case '删除':\n          if(output.length===1){\n            return '0'\n          }else{\n            return output.slice(0,-1) || ''\n          }\n      case '清空':\n         return '0'\n       default:\n           return '0'\n    }\n  }\n\n  export default generateOutput","import styled from \"styled-components\";\n\nconst Wrapper = styled.section`\n  display:flex;\n  flex-direction: column;\n  > .output{\n    background:white;\n    font-size: 36px;\n    line-height: 72px;\n    text-align:right;\n    padding: 0 16px;\n    box-shadow: inset 0 -5px 5px -5px rgba(0,0,0,0.25),\n                inset 0 5px 5px -5px rgba(0,0,0,0.25);\n  }\n  > .pad{ \n    > button{\n      font-size: 18px; \n      float: left; \n      width: 25%; \n      height: 64px; \n      border: none;\n      &.ok{ \n          height: 128px; \n          float: right; }\n      &.zero{ \n          width: 50%;\n         }\n      &:nth-child(1){\n        background:#f2f2f2;\n      }\n      &:nth-child(2),\n      &:nth-child(5) {\n        background:#E0E0E0;\n      }\n      &:nth-child(3),\n      &:nth-child(6),\n      &:nth-child(9) {\n        background:#D3D3D3;\n      }\n      &:nth-child(4),\n      &:nth-child(7),\n      &:nth-child(10) {\n        background:#C1C1C1;\n      }\n      &:nth-child(8),\n      &:nth-child(11),\n      &:nth-child(13) {\n        background:#B8B8B8;\n      }\n      &:nth-child(12) {\n        background:#9A9A9A;\n      }\n      &:nth-child(14) {\n        background:#A9A9A9;\n      }\n    }\n  }\n`;\n\nexport {Wrapper}","import { useState } from 'react'\nimport generateOutput from './NumberPadSection/generateOutput'\nimport {Wrapper} from './NumberPadSection/Wrapper'\n\ntype Props = {\n  amount:number,\n  onChange:(amount:number)=>void\n  onOk?:()=>void\n}\n// 输入小数点后，amount是number所以展示不清晰的问题木有解决\nconst NumberPadSection:React.FunctionComponent<Props> = (props)=>{\n  const [output,_setOutput] = useState(props.amount.toString())\n  const setOutput = (output:string)=>{\n    let newOutput:string\n    if(output.length>=16){\n      newOutput = output.slice(0,16)\n    }else if(output.length===0){\n      newOutput = '0'\n    }else {\n      newOutput = output\n    }\n    _setOutput(newOutput)\n    props.onChange(parseFloat(newOutput))\n    }\n\n  const onButtonClick = (e: React.MouseEvent) => {\n    const text = (e.target as HTMLButtonElement).textContent;\n    if (text === null) {return;}\n    if (text === 'OK') {\n      if (props.onOk) {props.onOk();}\n      return;\n    }\n    if ('0123456789.'.split('').concat(['删除', '清空']).indexOf(text) >= 0) {\n      setOutput(generateOutput(text, output));\n    }}\n\n  return(\n    <Wrapper>\n      <div className=\"output\">\n          {output}\n        </div>\n        <div className=\"pad clearfix\" onClick={onButtonClick}>\n          <button>1</button>\n          <button>2</button>\n          <button>3</button>\n          <button>删除</button>\n          <button>4</button>\n          <button>5</button>\n          <button>6</button>\n          <button>清空</button>\n          <button>7</button>\n          <button>8</button>\n          <button>9</button>\n          <button className=\"ok\">OK</button>\n          <button className=\"zero\">0</button>\n          <button className=\"dot\">.</button>\n        </div>\n    </Wrapper>\n  )\n}\n\nexport  {NumberPadSection};\n","import { useEffect, useState } from \"react\"\nimport useUpdate from \"./useUpdate\"\n\nexport type RecordItem = {\n    tagsId:number[],\n     notes:string,\n     type:'consume'|'earn',\n     amount:number,\n     createDate:string //ISO 8601\n}\n\ntype newRecordItem = Omit<RecordItem,'createDate'>\n\nexport const useRecord = ()=>{\nconst [records,setRecords] = useState<RecordItem[]>([])\n// 初次渲染，fetch数据\nuseEffect(()=>{\n    setRecords(JSON.parse(window.localStorage.getItem('records') ||'[]'))\n},[])\n// 监听数据变化 drts不加括号就会warning，监听的对象不能变化\nuseUpdate(()=>{\n    window.localStorage.setItem('records',JSON.stringify(records))\n},records)\n\n\nconst addRecord =(newRecord:newRecordItem)=>{\n    if(newRecord.amount===0){return false;}\n    if(newRecord.tagsId.length===0){\n        alert('选择一个标签可以帮助更好的分类哦')\n        return false;\n    }\n    const record = {...newRecord,createDate:(new Date()).toISOString()}\n    setRecords([...records,record])\n    return true;\n }\n return {records,addRecord}\n}\n","import Layout from '../components/Layout';\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport {TagsSection} from './Money/TagsSection';\nimport {TypeSection} from './Money/TypeSection';\nimport {NoteSection} from './Money/NoteSection';\nimport {NumberPadSection} from './Money/NumberPadSection';\nimport { useRecord } from 'hooks/useRecord';\n\nconst MyLayout = styled(Layout)`\n  display:flex;\n  flex-direction: column;\n`\nconst TypeWrapper = styled.div`\n  background-color: #c4c4c4;\n`\n\ntype MoneyType = 'consume'|'earn'\n\nconst defaultRecordValue = {\n  tagsId:[] as number[],\n  notes:'',\n  type:'consume' as MoneyType,\n  amount:0\n}\n\nfunction Money() {\n const [selectedRecord,setRecord] = useState(defaultRecordValue)\n\n const {addRecord} = useRecord()\n//  引入record数据管理\n\n type RecordItem = typeof selectedRecord\n const onChange = (obj:Partial<RecordItem>) =>{\n   setRecord({\n    ...selectedRecord,\n    ...obj}\n )}\n\n const submit = ()=>{\n   if(addRecord(selectedRecord)){\n     setRecord(defaultRecordValue)\n   }\n\n }\n\n  return (\n    <MyLayout scrollTop = {9999}>\n      <TagsSection selectedTagsId = {selectedRecord.tagsId}\n                   onChange = {tagsId=>onChange({tagsId})}/>       \n      <NoteSection  notes = {selectedRecord.notes}\n                   onChange = {notes=>onChange({notes})}/>\n      <TypeWrapper>\n      <TypeSection  type = {selectedRecord.type}\n                   onChange = {type=>onChange({type})}/>\n      </TypeWrapper>\n      <NumberPadSection  amount = {selectedRecord.amount}\n                   onChange = {amount=>onChange({amount})}\n                   onOk = {submit}/>\n    </MyLayout>\n    // numberpad的onchange用的是string的类型;drts这边ok没有清空数据！因为value已经set了\n  );\n}\n\nexport default Money;","import Layout from '../components/Layout';\nimport React, { ReactNode, useState } from 'react';\nimport day from 'dayjs'\nimport { TypeSection } from './Money/TypeSection';\nimport styled from 'styled-components';\nimport { RecordItem, useRecord } from 'hooks/useRecord';\nimport { useTags } from 'hooks/useTag';\n\n// 支出收入组件\n// 拿数据record和tag drts\n//先展示基础数据，每个record一条记录；然后再把时间提出来，造一个新的hash数据结构。\n\nconst TypeWrapper = styled.div`\nbackground:#FFF;\n`\n\nconst Item = styled.div`\ndisplay: flex;\njustify-content: space-between;\nfont-size: 18px;\nbackground-color: white;\nline-height:20px;\npadding:10px 16px;\n> .notes{\nmargin-right:auto;\nmargin-left:16px;\nfont-size: 14px;\ncolor:#999;\n}\n`\nconst Header = styled.h3`\n  font-weight:normal;\n  font-size: 18px;\n  line-height: 20px;\n  padding:10px 16px;\n`\n\nfunction Statistics() {\n  const [type,setType] = useState<'consume'|'earn'>('consume')\n  const {records} = useRecord()\n  const {getTagName} = useTags()\n  const hash:{[K:string]:RecordItem[]} = {}\n  const selectedRecords = ()=>{\n    return records.filter(r=>r.type===type)\n  }\n  selectedRecords().forEach(r=>{\n    const key = day(r.createDate).format('YYYY年MM月DD日')\n    if(!(key in hash)){\n      hash[key] = []\n    }\n    hash[key].push(r)\n  })\n\n  const array = Object.entries(hash).sort((a,b)=>{\n    if(a[0]===b[0]) return 0\n    if(a[0]>b[0]) return -1\n    if(a[0]<b[0]) return 1 \n    return 0\n  })\n\n  return (\n    <Layout>\n      <TypeWrapper>\n      <TypeSection  type = {type}\n                   onChange = {(type)=>setType(type)}/>\n     </TypeWrapper>\n    {\n      array.map(([date,records])=><div>\n        <Header>\n          {date}\n        </Header>\n        <div>\n          {records.map(r=>{\n            return(\n              <Item key={r.createDate}>\n                <div className=\"tags\" >\n                {r.tagsId\n                  .map(tagId => <span key={tagId}>{getTagName(tagId)}</span>)\n                  .reduce((result, span, index, array) =>\n                    result.concat(index < array.length - 1 ? [span, '，'] : [span]), [] as ReactNode[])\n                }\n                  {/* {r.tagsId.map(r=>getTagName(r)).join('/')} */}\n                </div>\n                {r.notes && <div className=\"notes\">\n                  {r.notes}\n                </div>\n                }\n                <div className=\"amount\">\n                ￥{r.amount}\n                </div>\n            </Item>\n            )\n          })\n          }\n      </div>\n      </div>)\n    }\n    </Layout>\n  );\n}\n\n\nexport default Statistics;\n","import styled from \"styled-components\";\n\nconst Button = styled.button`\nfont-size: 18px; border: none; padding: 8px 12px;\nbackground-color:#666;\nborder-radius: 4px;\ncolor: white;\n`;\n\nexport default Button;","import styled from \"styled-components\";\n\nconst Center = styled.div`\ndisplay:flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\n`;\n\nexport default Center","import styled from \"styled-components\";\n\nconst Space = styled.div`\n  height: 16px;`\n\nexport default Space;","import Layout from '../components/Layout';\nimport React from 'react';\nimport {useTags} from 'hooks/useTag';\nimport styled from 'styled-components';\nimport Icon from \"../components/Icon\"\nimport { Link } from 'react-router-dom';\nimport Button from 'components/Button';\nimport Center from 'components/Center';\nimport Space from 'components/Space';\n\n// import React from 'react';drts 这边都不需要引入react了么\n\nconst TagList = styled.ol`\n  font-size: 16px; \n  background:white;\n  > li{\n    a{\n      display:flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 16px 12px 0;\n    }\n      border-bottom: 1px solid #d5d5d9;\n      line-height: 20px;\n      margin: 0px 14px 0px 16px ; \n  }\n`;\n\n\n  function Tags() {\n  const {tags, addTag} = useTags();\n  return (\n    <Layout>\n      <TagList>\n        {tags.map(tag =>\n          <li key={tag.id}>\n            <Link to={'/tags/'+tag.id}>\n            <span className=\"oneLine\">{tag.name}</span>\n            <Icon iconName = \"iconfont icon-right\"/>\n            </Link>\n          </li>\n        )}\n      </TagList>\n      <Center>\n        <Space/>\n        <Space/>\n        <Space/>\n        <Button onClick={addTag}>新增标签</Button>\n      </Center>\n    </Layout>\n  );\n}\n\nexport default Tags;","import React from 'react';\n\nfunction NoMatch() {\n  return (\n    <div>页面不存在</div>\n  );\n}\n\nexport default NoMatch;\n","import Button from \"components/Button\"\nimport Center from \"components/Center\"\nimport Icon from \"components/Icon\"\nimport Input from \"components/Input\"\nimport Layout from \"components/Layout\"\nimport Space from \"components/Space\"\nimport React, { ChangeEventHandler } from \"react\"\nimport { useParams,useHistory } from \"react-router-dom\"\nimport styled from \"styled-components\"\nimport { useTags } from \"hooks/useTag\"\ntype Params = {\n    id:string\n}\n\nconst Topbar = styled.header`\n  display:flex;\n  justify-content: space-between;\n  align-items: center;\n  line-height: 20px;\n  padding: 14px;\n  background:white;\n`;\n\nconst InputWrapper = styled.div`\n  background:white;\n  padding: 0 16px;\n  margin-top: 8px;\n`;\n\nconst EditTag:React.FC=()=>{\n    const { id:idString } = useParams<Params>()\n    const { findTag,updateTag,deleteTag } = useTags()\n    const tag = findTag(parseInt(idString))\n    // 关于解构复制，参数不相等，怎么对应到右边返回的三个呢drts\n\n    const tagContent = (tag:{id:number,name:string})=>{\n        return(\n            <div>\n        <InputWrapper>\n        <Input label=\"标签名\" type=\"text\" placeholder=\"标签名\"\n               value={tag.name} onChange={ (e)=>{\n                    updateTag(tag,e.target.value)}}/>\n      </InputWrapper>\n      <Center>\n        <Space/>\n        <Space/>\n        <Space/>\n        <Button onClick={()=>{deleteTag(tag)}}>删除标签</Button>\n    </Center>\n    </div>\n        )\n    }\n    const history = useHistory()\n    const onClickBack = ()=>{\n        history.goBack()\n    }\n\n    return(\n    <Layout>\n      <Topbar>\n        <Icon iconName=\"iconfont icon-left\" onClick={onClickBack}/>\n        <span>编辑标签</span>\n        <Icon iconName=''/>\n      </Topbar>\n      {tag? tagContent(tag):(<Center><Space/><Space/>标签不存在</Center>)}\n      {/* react的html模块可以加各种js，很灵活 */}\n    </Layout>\n    )\n}\n\nexport default EditTag","import React from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\nimport Money from './views/Money';\nimport Statistics from './views/Statistics';\nimport Tags from './views/Tags';\nimport NoMatch from './views/NoMatch';\nimport EditTag from 'views/EditTag';\n\n\n\nfunction App() {\n  return (\n    <Router>   \n      <Switch>\n          <Route exact path=\"/tags\">\n            <Tags />\n          </Route>\n          <Route exact path=\"/tags/:id\">\n            <EditTag />\n          </Route>\n          <Route exact path=\"/statistics\">\n            <Statistics />\n          </Route>\n          <Route exact path=\"/money\">\n            <Money />\n          </Route>\n          <Route exact path=\"/\">\n          <Redirect to=\"/money\"/>\n          </Route>\n          <Route path=\"*\">\n            <NoMatch />\n          </Route>\n        </Switch> \n    </Router>\n  );\n}\n\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport \"./index.scss\";\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n\nreportWebVitals();\n"],"sourceRoot":""}